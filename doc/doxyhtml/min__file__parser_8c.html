<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MIN Test Framework: min/src/utils/parser/min_file_parser.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>min/src/utils/parser/min_file_parser.c File Reference</h1>This file contains implementation of MIN File Parser. <a href="#_details">More...</a>
<p>
<code>#include &lt;unistd.h&gt;</code><br>
<code>#include &quot;<a class="el" href="min__file__parser_8h-source.html">min_file_parser.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">LOCAL <a class="el" href="min__common_8h.html#59d401bae2206f42a8e94d7ab20aa484">TSBool</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="min__file__parser_8c.html#e6f14531225e3b3289618191d71bc782">mfp_read_line</a> (<a class="el" href="struct__MinFileParser.html">MinFileParser</a> *sfp, TSChar **line_buffer, TSChar *eol_buffer)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">LOCAL void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="min__file__parser_8c.html#a563c2a7177b13f788daf33932a2cdb8">mfp_replace_comments_line</a> (const TSChar *src_buff, TSChar **dst_buff, <a class="el" href="min__file__parser_8h.html#85473e7d5dedf60a7137f90b46c14e1e">TWhatToFind</a> find)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">LOCAL void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="min__file__parser_8c.html#d7f02290d4ee7c7a3696ac0f6e8e4395">mfp_replace_hash_comments_line</a> (const TSChar *src_buff, TSChar **dst_buff)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">LOCAL void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="min__file__parser_8c.html#dbb4c30e235e02788ef13b5f32bc02d9">mfp_clear_file_stack</a> (<a class="el" href="struct__MinFileParser.html">MinFileParser</a> *sfp)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">LOCAL void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="min__file__parser_8c.html#f55ea396ca10422969f4301d1d64d09e">mfp_pop_from_file_stack</a> (<a class="el" href="struct__MinFileParser.html">MinFileParser</a> *sfp)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">LOCAL void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="min__file__parser_8c.html#442fe1060ee0880bba54f7e43ff47def">mfp_push_file_to_stack</a> (<a class="el" href="struct__MinFileParser.html">MinFileParser</a> *sfp, const TSChar *file_name)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">LOCAL int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="min__file__parser_8c.html#4fa21381153f454cae9ac9d587b13ece">compare_filename</a> (const void *a, const void *b)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="struct__MinFileParser.html">MinFileParser</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="min__file__parser_8c.html#ff941756f52f23a91286883800858ddb">mfp_create</a> (FILE *file, <a class="el" href="min__file__parser_8h.html#381290258780e97376725bd0b3470e88">TUnicode</a> is_unicode, <a class="el" href="min__parser__common_8h.html#5c7a157bfd6bf85286398739049d4b43">TCommentType</a> comment_type)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="min__file__parser_8c.html#0d790a582fcaa069f7de8d60c1363637">mfp_destroy</a> (<a class="el" href="struct__MinFileParser.html">MinFileParser</a> **sfp)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">TSChar *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="min__file__parser_8c.html#a7635ae15267f6c4c02c1f14f79e6fd2">mfp_next_section</a> (<a class="el" href="struct__MinFileParser.html">MinFileParser</a> *sfp, const TSChar *start_tag, const TSChar *end_tag, int *offset, int seeked)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file contains implementation of MIN File Parser. 
<p>
<dl class="version" compact><dt><b>Version:</b></dt><dd>0.1 </dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="4fa21381153f454cae9ac9d587b13ece"></a><!-- doxytag: member="min_file_parser.c::compare_filename" ref="4fa21381153f454cae9ac9d587b13ece" args="(const void *a, const void *b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LOCAL int compare_filename           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>b</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Used for comparing filenames on the list <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>a</em>&nbsp;</td><td>filename string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>b</em>&nbsp;</td><td>filename string </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 if the filenames match !=0 otherwise </dd></dl>

</div>
</div><p>
<a class="anchor" name="dbb4c30e235e02788ef13b5f32bc02d9"></a><!-- doxytag: member="min_file_parser.c::mfp_clear_file_stack" ref="dbb4c30e235e02788ef13b5f32bc02d9" args="(MinFileParser *sfp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LOCAL void mfp_clear_file_stack           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__MinFileParser.html">MinFileParser</a> *&nbsp;</td>
          <td class="paramname"> <em>sfp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Closes all files on file stack and clears the stack. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sfp</em>&nbsp;</td><td>[in] pointer to the MinFileParser to operate on. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="ff941756f52f23a91286883800858ddb"></a><!-- doxytag: member="min_file_parser.c::mfp_create" ref="ff941756f52f23a91286883800858ddb" args="(FILE *file, TUnicode is_unicode, TCommentType comment_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__MinFileParser.html">MinFileParser</a>* mfp_create           </td>
          <td>(</td>
          <td class="paramtype">FILE *&nbsp;</td>
          <td class="paramname"> <em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="min__file__parser_8h.html#381290258780e97376725bd0b3470e88">TUnicode</a>&nbsp;</td>
          <td class="paramname"> <em>is_unicode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="min__parser__common_8h.html#5c7a157bfd6bf85286398739049d4b43">TCommentType</a>&nbsp;</td>
          <td class="paramname"> <em>comment_type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new file parser. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>file</em>&nbsp;</td><td>[in] is the pointer to the FILE entity. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>is_unicode</em>&nbsp;</td><td>[in] is a flag indicating if file is unicode. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>comment_type</em>&nbsp;</td><td>[in] is an indication how to treat comments in file. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>adress of the allocaded MinFileParser entity. </dd></dl>

</div>
</div><p>
<a class="anchor" name="0d790a582fcaa069f7de8d60c1363637"></a><!-- doxytag: member="min_file_parser.c::mfp_destroy" ref="0d790a582fcaa069f7de8d60c1363637" args="(MinFileParser **sfp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mfp_destroy           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__MinFileParser.html">MinFileParser</a> **&nbsp;</td>
          <td class="paramname"> <em>sfp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroys allocated file parser. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fp</em>&nbsp;</td><td>[in] allocated file parser entity. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="a7635ae15267f6c4c02c1f14f79e6fd2"></a><!-- doxytag: member="min_file_parser.c::mfp_next_section" ref="a7635ae15267f6c4c02c1f14f79e6fd2" args="(MinFileParser *sfp, const TSChar *start_tag, const TSChar *end_tag, int *offset, int seeked)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TSChar* mfp_next_section           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__MinFileParser.html">MinFileParser</a> *&nbsp;</td>
          <td class="paramname"> <em>sfp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TSChar *&nbsp;</td>
          <td class="paramname"> <em>start_tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TSChar *&nbsp;</td>
          <td class="paramname"> <em>end_tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>seeked</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Open and read configuration source and parses a required section. This method will parse next section after the earlier section if seeked parameter is equal 1. If configuration file includes several sections with both start and end tags so seeked parameter seeks the required section. If start tag is not given, returned section begins from the beginning of the file. If end tag is not given, returned sections ends at the end of the file. If section is not found function will return INITPTR <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sfp</em>&nbsp;</td><td>[in] adress of the <a class="el" href="namespaceMin.html" title="MIN Test Framework Qt GUI namespace.">Min</a> File Parser </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>start_tag</em>&nbsp;</td><td>[in] indicates the tag name to start from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>end_tag</em>&nbsp;</td><td>[in] indicates the tag name to end on. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>offset</em>&nbsp;</td><td>[in] ... </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>seeked</em>&nbsp;</td><td>[in] indicates section that will be parsed.</td></tr>
  </table>
</dl>
Possible Errors:<ul>
<li>EINVAL: invalid value was passed to the function. </li></ul>

</div>
</div><p>
<a class="anchor" name="f55ea396ca10422969f4301d1d64d09e"></a><!-- doxytag: member="min_file_parser.c::mfp_pop_from_file_stack" ref="f55ea396ca10422969f4301d1d64d09e" args="(MinFileParser *sfp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LOCAL void mfp_pop_from_file_stack           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__MinFileParser.html">MinFileParser</a> *&nbsp;</td>
          <td class="paramname"> <em>sfp</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Pops FILE handle from file stack and sets correct current file handle. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sfp</em>&nbsp;</td><td>[in] pointer to the MinFileParser to operate on. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="442fe1060ee0880bba54f7e43ff47def"></a><!-- doxytag: member="min_file_parser.c::mfp_push_file_to_stack" ref="442fe1060ee0880bba54f7e43ff47def" args="(MinFileParser *sfp, const TSChar *file_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LOCAL void mfp_push_file_to_stack           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__MinFileParser.html">MinFileParser</a> *&nbsp;</td>
          <td class="paramname"> <em>sfp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TSChar *&nbsp;</td>
          <td class="paramname"> <em>file_name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Opens file and pushes it to stack. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sfp</em>&nbsp;</td><td>[in] pointer to the MinFileParser to operate on. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>file_name</em>&nbsp;</td><td>[in] value to be pushed to the stack. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="e6f14531225e3b3289618191d71bc782"></a><!-- doxytag: member="min_file_parser.c::mfp_read_line" ref="e6f14531225e3b3289618191d71bc782" args="(MinFileParser *sfp, TSChar **line_buffer, TSChar *eol_buffer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LOCAL <a class="el" href="min__common_8h.html#59d401bae2206f42a8e94d7ab20aa484">TSBool</a> mfp_read_line           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__MinFileParser.html">MinFileParser</a> *&nbsp;</td>
          <td class="paramname"> <em>sfp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TSChar **&nbsp;</td>
          <td class="paramname"> <em>line_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TSChar *&nbsp;</td>
          <td class="paramname"> <em>eol_buffer</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reads configuration source and returns a complete line. This method will return also and end of line sequence. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>line_buffer</em>&nbsp;</td><td>[out] handler to which the buffer will be attached. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>eol_buffer</em>&nbsp;</td><td>[out] table for eol sequence. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>&gt; 0 on success, 0 on failure. </dd></dl>

</div>
</div><p>
<a class="anchor" name="a563c2a7177b13f788daf33932a2cdb8"></a><!-- doxytag: member="min_file_parser.c::mfp_replace_comments_line" ref="a563c2a7177b13f788daf33932a2cdb8" args="(const TSChar *src_buff, TSChar **dst_buff, TWhatToFind find)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LOCAL void mfp_replace_comments_line           </td>
          <td>(</td>
          <td class="paramtype">const TSChar *&nbsp;</td>
          <td class="paramname"> <em>src_buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TSChar **&nbsp;</td>
          <td class="paramname"> <em>dst_buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="min__file__parser_8h.html#85473e7d5dedf60a7137f90b46c14e1e">TWhatToFind</a>&nbsp;</td>
          <td class="paramname"> <em>find</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parses a given line and removes all c-style comments from it. Result is passed in destination buffer. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>src_buff</em>&nbsp;</td><td>[in] buffer to be processed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dst_buff</em>&nbsp;</td><td>[out] the result of processing. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>find</em>&nbsp;</td><td>[in] what kind of comments we are looking for. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="d7f02290d4ee7c7a3696ac0f6e8e4395"></a><!-- doxytag: member="min_file_parser.c::mfp_replace_hash_comments_line" ref="d7f02290d4ee7c7a3696ac0f6e8e4395" args="(const TSChar *src_buff, TSChar **dst_buff)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LOCAL void mfp_replace_hash_comments_line           </td>
          <td>(</td>
          <td class="paramtype">const TSChar *&nbsp;</td>
          <td class="paramname"> <em>src_buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TSChar **&nbsp;</td>
          <td class="paramname"> <em>dst_buff</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parses a given line and removes all #-style comments. Result is passed in destination buffer. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>src_buff</em>&nbsp;</td><td>[in] buffer to be processed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dst_buff</em>&nbsp;</td><td>[out] the result of processing. </td></tr>
  </table>
</dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Sep 1 08:28:01 2009 for MIN Test Framework by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
