<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>MIN Test Framework: min/src/engine/tec/tec_tcp_handling.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>min/src/engine/tec/tec_tcp_handling.h File Reference</h1>Header for tec tcp socket handling. <a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="tec__rcp__handling_8h-source.html">tec_rcp_handling.h</a>&gt;</code><br>

<p>
<a href="tec__tcp__handling_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tec__tcp__handling_8h.html#b3d9b0ab9db06d1a9ce0c335aaf53b69">ec_poll_sockets</a> (void *arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tec__tcp__handling_8h.html#92400a8112842d18af70916119cc49b4">new_tcp_master</a> (int socket)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="aa0491a5870ba718bb70e6bf5553f94b"></a><!-- doxytag: member="tec_tcp_handling.h::ec_create_listen_socket" ref="aa0491a5870ba718bb70e6bf5553f94b" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>ec_create_listen_socket</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tec__tcp__handling_8h.html#9ffae82b156f9390bac57249914db2d3">socket_send_rcp</a> (char *cmd, char *sender, char *rcvr, char *msg, int <a class="el" href="tcpip__plugin_8c.html#6f8059414f0228f0256115e024eeed4b">fd</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tec__tcp__handling_8h.html#c0534500df36cfb843de26b7c9f25a78">allocate_ip_slave</a> (char *slavetype, char *slavename, pid_t pid)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tec__tcp__handling_8h.html#836802590b0f945fba19d8c18c2a1ba3">tcp_slave_close</a> (<a class="el" href="structslave__info.html">slave_info</a> *slave)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="tec__tcp__handling_8h.html#1feb4a8d78c0b4a4831296c7a4e13d3d">tcp_msg_handle_response</a> (<a class="el" href="struct__MinItemParser.html">MinItemParser</a> *mip)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Header for tec tcp socket handling. 
<p>
<dl class="version" compact><dt><b>Version:</b></dt><dd>0.1 </dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="c0534500df36cfb843de26b7c9f25a78"></a><!-- doxytag: member="tec_tcp_handling.h::allocate_ip_slave" ref="c0534500df36cfb843de26b7c9f25a78" args="(char *slavetype, char *slavename, pid_t pid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int allocate_ip_slave           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>slavetype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>slavename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pid_t&nbsp;</td>
          <td class="paramname"> <em>pid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Tries to allocate slave entry for IP communication <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>he</em>&nbsp;</td><td>host address information </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>slavetype</em>&nbsp;</td><td>type of the slave e.g. "phone" </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pid</em>&nbsp;</td><td>process identifier of the slave test case </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 on success, 1 on error </dd></dl>

</div>
</div><p>
<a class="anchor" name="b3d9b0ab9db06d1a9ce0c335aaf53b69"></a><!-- doxytag: member="tec_tcp_handling.h::ec_poll_sockets" ref="b3d9b0ab9db06d1a9ce0c335aaf53b69" args="(void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ec_poll_sockets           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Handles socket polling thread <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>not used </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>NULL </dd></dl>

</div>
</div><p>
<a class="anchor" name="92400a8112842d18af70916119cc49b4"></a><!-- doxytag: member="tec_tcp_handling.h::new_tcp_master" ref="92400a8112842d18af70916119cc49b4" args="(int socket)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void new_tcp_master           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>socket</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new master entry. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>socket</em>&nbsp;</td><td>the socket of the master </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="9ffae82b156f9390bac57249914db2d3"></a><!-- doxytag: member="tec_tcp_handling.h::socket_send_rcp" ref="9ffae82b156f9390bac57249914db2d3" args="(char *cmd, char *sender, char *rcvr, char *msg, int fd)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void socket_send_rcp           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>sender</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>rcvr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Build rcp message and adds it to the write queue of slave <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cmd</em>&nbsp;</td><td>command e.g. "reserve" </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sender</em>&nbsp;</td><td>RCP sender identifier </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rcvr</em>&nbsp;</td><td>RCP receiver identifier </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>the rest of message </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>fd</em>&nbsp;</td><td>the socket of the destination </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="1feb4a8d78c0b4a4831296c7a4e13d3d"></a><!-- doxytag: member="tec_tcp_handling.h::tcp_msg_handle_response" ref="1feb4a8d78c0b4a4831296c7a4e13d3d" args="(MinItemParser *mip)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcp_msg_handle_response           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__MinItemParser.html">MinItemParser</a> *&nbsp;</td>
          <td class="paramname"> <em>extif_message</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function handles "response" message coming from external controller over tcp <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>extif_message</em>&nbsp;</td><td>pointer to item parser. It is assumed that mip_get_string was executed once for this parser to get first "word" </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>result of operation, 0 if ok. </dd></dl>

</div>
</div><p>
<a class="anchor" name="836802590b0f945fba19d8c18c2a1ba3"></a><!-- doxytag: member="tec_tcp_handling.h::tcp_slave_close" ref="836802590b0f945fba19d8c18c2a1ba3" args="(slave_info *slave)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tcp_slave_close           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structslave__info.html">slave_info</a> *&nbsp;</td>
          <td class="paramname"> <em>slave</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function to close slave connection to slave. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>slave</em>&nbsp;</td><td>the <a class="el" href="structslave__info.html">slave_info</a> struck </td></tr>
  </table>
</dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Sep 1 08:27:57 2009 for MIN Test Framework by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
